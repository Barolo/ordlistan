{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/lists.css') }}">
{% endblock %}

{% block content %}

<div class="list-view-container">

    <!-- =========================
         HEADER
    ========================== -->
    <div class="list-view-header">
        <h1>{{ wordlist.name }}</h1>

        <form method="POST"
              action="{{ url_for('lists.rename_list', list_id=wordlist.id) }}"
              class="d-flex gap-2">
            <input
                type="text"
                name="name"
                value="{{ wordlist.name }}"
                class="form-control form-control-sm"
                required
            >
            <button class="btn-small">Byt namn</button>
        </form>
    </div>


    <!-- =========================
         ACTIONS
    ========================== -->
    <div class="card mb-3">
        <a href="{{ url_for('quiz.quiz_settings', preselect_list=wordlist.id) }}"
           class="btn-primary w-100 text-center">
            â–¶ Starta fÃ¶rhÃ¶r
        </a>
    </div>


    <!-- =========================
         ADD WORD
    ========================== -->
    <div class="card mb-4">
        <h3>LÃ¤gg till ord</h3>

        <form method="POST"
              action="{{ url_for('lists.add_word', list_id=wordlist.id) }}"
              class="add-word-form">

            <input
                type="text"
                name="original"
                placeholder="Svenska"
                required
            >

            <input
                type="text"
                name="translation"
                placeholder="Ã–versÃ¤ttning"
                required
            >

            <button class="btn-primary">
                LÃ¤gg till
            </button>
        </form>
    </div>


    <!-- =========================
         WORD TABLE
    ========================== -->
    <div class="card words-card">

        <h3>Ord i listan ({{ words|length }})</h3>

        {% if words %}
        <table class="words-table">
            <thead>
                <tr>
                    <th>Original</th>
                    <th>Ã–versÃ¤ttning</th>
                    <th>RÃ¤tt</th>
                    <th>Fel</th>
                    <th>Senast fel</th>
                    <th></th>
                </tr>
            </thead>

            <tbody>
                {% for w in words %}
                <tr>
                    <td>{{ w.original }}</td>
                    <td>{{ w.translation }}</td>
                    <td>{{ w.correct_count }}</td>
                    <td>{{ w.wrong_count }}</td>
                    <td>
                        {% if w.last_wrong %}
                            {{ w.last_wrong.strftime("%Y-%m-%d") }}
                        {% else %}
                            â€“
                        {% endif %}
                    </td>
                    <td>
                        <a href="{{ url_for('lists.delete_word', word_id=w.id) }}"
                           class="table-btn delete"
                           title="Ta bort">
                            ðŸ—‘
                        </a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
            <p class="text-muted">Inga ord Ã¤nnu i listan.</p>
        {% endif %}
    </div>


    <!-- =========================
         SHARE LIST
    ========================== -->
    <div class="card mt-4">
        <h3>Dela ordlista</h3>

        <form method="POST"
              action="{{ url_for('lists.share_list', list_id=wordlist.id) }}"
              class="d-flex gap-2">

            <input
                type="email"
                name="email"
                placeholder="E-postadress"
                class="form-control"
                required
            >

            <button class="btn-small">
                Skicka
            </button>
        </form>
    </div>

</div>

{% endblock %}
